<style>
.select-calendar span {
	display: inline-block;
	width: 200px;
}

.results {
	margin: 10px 0px;
}

.balance-entry {
	background-color: #eee;
	padding: 1px 1px 1px 5px;
	margin: 1px;
}

.balance-warning {
	color:red;
}

.balance-credit {
	color:green;
}

.balance-amount {
	font-weight: 900;
	font-family: Consolas,monospace;
}

.balance-summary {
	font-size:.9em;
	font-family: Consolas,monospace;
	left:100px;
	position:absolute;
}

.balance-date {
	font-family: Consolas,monospace;
	left:300px;
	position:absolute;
}

.select-calendar > img {
	height: 10px;
}
.fincal-controls {
	padding-top: 20px;
}
.fincal-controls > div > mat-form-field {
	width: 100%;
}
.mat-column-Balance{
	max-width:15%;
}
.mat-column-Summary {
	overflow:hidden;
	white-space: nowrap;
  text-overflow: ellipsis;
}
.mat-column-When {
	max-width:22%;
}
.mat-header-row,
.mat-row {
	padding:0;
}
</style>
<div style="text-align:center">
	<h2>
		{{title}} {{version}}!
	</h2>
</div>
<div fxLayout="row" fxLayoutAlign="center center">
	<button *ngIf="!accessAuthorized" mat-raised-button (click)="handleAuthClick()">
		AUTHORIZE
	</button>
	<button *ngIf="accessAuthorized" mat-raised-button (click)="signOut()">
		SIGN OUT
	</button>
</div>
<div *ngIf="accessAuthorized" fxLayout="column">
	<div class="fincal-controls" fxLayout="column" fxLayoutAlign="end stretch">
		<div>
			<mat-form-field>
				<mat-select placeholder="Credit calendar (income)" [(value)]="calCredit">
					<mat-option>-- Select a calendar --</mat-option>
					<mat-option *ngFor="let calendar of calendars" [value]="calendar">
						{{calendar.summary}}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div>
			<mat-form-field>
				<mat-select placeholder="Debit calendar (bills)" [(value)]="calDebit">
					<mat-option>-- Select a calendar --</mat-option>
					<mat-option *ngFor="let calendar of calendars" [value]="calendar">
						{{calendar.summary}}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div>
			<mat-form-field>
				<input matInput type="number" placeholder="Current balance (checking)" [(ngModel)]="curBalance">
			</mat-form-field>
		</div>
		<div>
			<mat-form-field>
				<input matInput type="date" placeholder="Target forecast date" [ngModel]="tarDate | date:'yyyy-MM-dd'" (ngModelChange)="tarDate = $event">
			</mat-form-field>
		</div>
	</div>
	<div fxLayout="row" fxLayoutAlign="center center">
		<button mat-raised-button id="update-results" (click)="updateResults()">Update</button>
	</div>
	<div id="results" fxFlex>
		<mat-table #table [dataSource]="results">
				<ng-container matColumnDef="Balance">
					<mat-header-cell *matHeaderCellDef>Balance</mat-header-cell>
					<mat-cell *matCellDef="let row" [style.color]="row.Balance <= 0 ? 'red' : ''">{{row.Balance}}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="Summary">
					<mat-header-cell *matHeaderCellDef>Summary</mat-header-cell>
					<mat-cell *matCellDef="let row" [style.color]="row.Type == 0 ? 'green' : ''">{{row.Summary}}</mat-cell>
				</ng-container>
				<ng-container matColumnDef="When">
					<mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
					<mat-cell *matCellDef="let row">{{row.When | date:'MM-dd-yy'}}</mat-cell>
				</ng-container>
				<mat-header-row *matHeaderRowDef="['Balance','Summary','When']"></mat-header-row>
				<mat-row *matRowDef="let row; columns: ['Balance','Summary','When']"></mat-row>
		</mat-table>
	</div>
</div>